webpackJsonp([18,22],{14:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var a=Date.now(),i=["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],n=["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"],s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],o={},l=0;l<31;l++){var r=new Date(a+8352e4*l).getMonth()+1,c=new Date(a+8352e4*l).getFullYear(),d=new Date(a+8352e4*l).getDate(),p=c+"."+r+"."+d;o[p]=i}e.timeArr=i,e.oneMonthTime=o,e.dayArr=s,e.timeJXArr=n},49:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(4),s=i(n),o=a(9),l=i(o),r=a(3),c=(a(14),a(13));e.default={name:"appointment",data:function(){var t;return t={id:"",hospitalShow:!1,onDayTimeActions:[],storesActions:[],storeId:null,storesShow:!1,departmentsId:null,hospitalActions:[],departmentsActions:[],durationDayShow:!1,departmentsShow:!1,type:"",duration:null,time:"点击选择服务时间",hospital:"选择所在医院",departments:"所在科室",timeShow:!1,dayTimeShow:!1,testDay:"",testTime:"",store:"点击选择门店",hospitalId:null,showHospital:!1,region:"",durationDay:"",durationUnit:3,oneMonthTimeAction:[],JXtime:[]},(0,l.default)(t,"duration",""),(0,l.default)(t,"hospitalEnter",""),t},watch:{day:function(t,e){t!=e&&(conosl.log(this.durationDay),this.price=this.durationDay*this.glodalVal.companyType.split(" ")[1])},testDay:function(t,e){var a=this;if(t!=e){var i=[{name:"请选择时间",method:function(){}}],n=t.slice(0,4),s=t.slice(5,7),o=t.slice(8,10),l=n+"/"+s+"/"+o,r=(new Date).getFullYear(),d=(new Date).getMonth()+1,p=(new Date).getDate(),m=r+"/"+d+"/"+p;if(new Date(l)>new Date(m))for(var h=1;h<=24;h++)if("计项类"==a.glodalVal.jrOrJx)!function(){var t={},e=(0,c.addzero)(h)+":00";t.name=e,t.method=function(){a.JXtime.indexOf(a.testDay+" "+e)==-1&&(a.JXtime.push(a.testDay+" "+e),a.durationUnit=5)},i.push(t);var n={},s=(0,c.addzero)(h)+":30";n.name=s,n.method=function(){a.JXtime.indexOf(a.testDay+" "+e)==-1&&(a.JXtime.push(a.testDay+" "+e),a.durationUnit=5)},i.push(n)}();else for(var u=function(t){var e={},n=(0,c.addzero)(t)+":00";e.name=n,e.method=function(){a.testTime=n,a.time=a.testDay+" "+n,a.duration<1?a.durationDay=.5:"ys"==a.type?a.durationDayShow=!1:a.durationDayShow=!0},i.push(e)},f=1;f<=24;f++)u(f);else for(var A=(new Date).getHours()+1;A<=24;A++)if("计项类"==a.glodalVal.jrOrJx)!function(){var t={},e=(0,c.addzero)(A)+":00";t.name=e,t.method=function(){a.JXtime.indexOf(a.testDay+" "+e)==-1&&(a.JXtime.push(a.testDay+" "+e),a.durationUnit=5)},i.push(t);var n={},s=(0,c.addzero)(A)+":30";n.name=s,n.method=function(){a.JXtime.indexOf(a.testDay+" "+e)==-1&&(a.JXtime.push(a.testDay+" "+e),a.durationUnit=5)},i.push(n)}();else for(var v=function(t){var e={},n=(0,c.addzero)(t)+":00";e.name=n,e.method=function(){a.testTime=n,a.time=a.testDay+" "+n,a.duration<1?a.durationDay=.5:"ys"==a.type?a.durationDayShow=!1:a.durationDayShow=!0},i.push(e)},w=1;w<=24;w++)v(w);this.onDayTimeActions=i}}},created:function(){var t=this,e=this;this.hospitals.items.length>=0&&this.hospitals.items.forEach(function(a){var i={};i.name=a.name,i.method=function(){var t=this;e.hospital=a.name,e.hospitalId=a.id,e.hospitalEnter=a.entered,e.fetchDepartments(a.id).catch(function(e){3001==e.body.code&&t.$router.push("/")})},t.hospitalActions.push(i)})},beforeRouteEnter:function(t,e,a){var i=this;a(function(e){e.type=t.query.type,e.duration=t.query.duration,e.getBecaredDetail(e.glodalVal.beCaredId).catch(function(t){3001==t.body.code&&i.$router.push("/")}),e.id=t.query.id,"ys"==t.query.type&&e.getZoneStore(e.glodalVal.currentCity)})},computed:(0,s.default)({},(0,r.mapGetters)({beCaredDetail:"getBeCaredDetail",glodalVal:"getGlodalVal",hospitals:"getHospitals",allDepartments:"getDepartments",citiesProvince:"getCities",myServices:"getMyServices"}),{price:function(){return"ys"==this.type||.5==this.duration?this.glodalVal.companyType.match(/\d+元/)[0].match(/\d+/)[0]:"jx"==this.type?this.glodalVal.companyType.match(/\d+元/)[0].match(/\d+/)[0]*this.JXtime.length:(this.durationDay||0)*parseInt(this.glodalVal.companyType.split(" ")[1])},ondurationDayActions:function t(){for(var e=this,t=[{name:"请选择服务天数",method:function(){}}],a=function(a){var i={};i.name=a,i.method=function(){e.time=e.testDay+" "+e.testTime+" "+a+"天",e.durationDay=a},t.push(i)},i=1;i<=60;i++)a(i);return t},oneMonthDayActions:function(){for(var t=this,e=[{name:"请选择日期",method:function(){}}],a=function(a){var i={},n=Date.now(),s=new Date(n+8352e4*a).getMonth()+1,o=new Date(n+8352e4*a).getFullYear(),l=new Date(n+8352e4*a).getDate(),r=o+"."+(0,c.addzero)(s)+"."+(0,c.addzero)(l);i.name=r,i.method=function(){t.testDay=r,t.dayTimeShow=!0},e.push(i)},i=0;i<31;i++)a(i);return e}}),methods:(0,s.default)({},(0,r.mapActions)({getBecaredDetail:"getBecaredDetail",fetchDepartments:"fetchDepartments",addAppointment:"addAppointment",addMyAppointment:"addMyAppointment",addJXAppoinment:"addJXAppoinment",getZoneStore:"getZoneStore",addYSAppoinment:"addYSAppoinment",changeTabSelected:"changeTabSelected"}),{goBack:function(){history.go(-1)},deleteOneJxTime:function(t){var e=this.JXtime.indexOf(t);if(e>=0){for(var a=a;a<this.JXtime.length-1;a++)this.JXtime[a]=this.JXtime[a+1];this.JXtime.pop()}},departmentsChange:function(){var t=this,e=this;this.allDepartments.forEach(function(a){if(e.hospitalEnter){if(a.businessSupervisorId&&a.operationSupervisorId){t.departmentsActions=[];var i={};i.name=a.name,i.method=function(){e.departments=a.name,e.departmentsId=a.id},t.departmentsActions.push(i)}}else{t.departmentsActions=[];var n={};n.name=a.name,n.method=function(){e.departments=a.name,e.departmentsId=a.id},t.departmentsActions.push(n)}}),this.departmentsShow=!0},storeChange:function(){var t=this,e=this;this.glodalVal.store.forEach(function(a){var i={};i.name=a.name,i.method=function(){e.store=a.name,e.storeId=a.id},t.storesActions.push(i)}),this.storesShow=!0},handleAppoitment:function(){var t=this,e="",a=this.citiesProvince;a.forEach(function(a){a.city==t.glodalVal.currentCity&&(e=a.province)});var i={};i.beCareId=this.glodalVal.beCaredId,i.remark=this.remark,i.city=this.glodalVal.currentCity,i.province=e,i.serviceDate=this.testDay.replace(/\./g,"-")+" "+this.testTime,i.serviceDurationUnit=this.durationUnit,i.serviceDuration=this.durationDay,"my"==this.type?(i.infantMom=this.glodalVal.infantMom,i.infantMom.serviceId=this.id,i.hospitalId=this.hospitalId,i.departmentId=this.departmentsId,i.region=this.region,this.addMyAppointment(i).then(function(e){e.ok&&(t.changeTabSelected("订单"),t.$router.push({path:"/index",query:{back:"order"}}))},function(e){3001==e.body.code&&t.$router.push("/login")})):"jr"==this.type?(this.glodalVal.home?i.address=this.address:(i.hospitalId=this.hospitalId,i.departmentId=this.departmentsId,i.region=this.region),i.diseaseCare={serviceId:this.id,selfCareAbility:this.glodalVal.selfCareAbility,illnessLevel:this.glodalVal.illnessLevel},this.addAppointment(i).then(function(e){e.ok&&(t.changeTabSelected("订单"),t.$router.push({path:"/index",query:{back:"order"}}))},function(e){3001==e.body.code&&t.$router.push("/login")})):"jx"==this.type?(i.hospitalId=this.hospitalId,i.departmentId=this.departmentsId,i.region=this.region,i.serviceDates=this.JXtime,i.serviceDuration=this.duration,i.itemClass={serviceIndex:this.glodalVal.serviceIndex,serviceId:this.id},this.addJXAppoinment(i).then(function(e){e.ok&&(t.changeTabSelected("订单"),t.$router.push({path:"/index",query:{back:"order"}}))},function(e){3001==e.body.code&&t.$router.push("/login")})):"ys"==this.type&&(i.address=this.address,i.serviceDuration=this.glodalVal.companyType.match(/\/(\d+)/)[1],i.infantMom=this.glodalVal.infantMom,i.infantMom.serviceId=this.id,this.glodalVal.store.forEach(function(e){e.name==t.store&&(i.storeId=e.id)}),this.addYSAppoinment(i).then(function(e){e.ok&&(t.changeTabSelected("订单"),t.$router.push({path:"/index",query:{back:"order"}}))},function(e){3001==e.body.code&&t.$router.push("/login")}))}})}},151:function(t,e,a){e=t.exports=a(1)(),e.push([t.id,".appointment{font-size:.4rem}.appointment .mint-cell-value{-ms-flex:4;flex:4}.appointment .mint-popup{width:65%}.appointment .footer{right:0;bottom:0;left:0;position:fixed;z-index:1;width:100%;background-color:#fff;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-top:1px solid #d06091}.appointment .footer .price{height:1rem;margin-left:.5rem;line-height:1rem;color:#ff8f0b}.appointment .footer .mint-button{background-color:#d06091;color:#fff}.appointment .mint-actionsheet{max-height:11.5rem;overflow:scroll}.appointment .mint-actionsheet-listitem{font-size:.5rem;line-height:1.2rem;height:1.2rem}li{list-style:none}","",{version:3,sources:["/./src/views/Appointment.vue"],names:[],mappings:"AACA,aACE,eAAkB,CACnB,AACD,8BACE,WAAY,AACR,MAAQ,CACb,AACD,yBACE,SAAW,CACZ,AACD,qBACI,QAAS,AACT,SAAU,AACV,OAAQ,AACR,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,sBAAuB,AACzB,oBAAqB,AACrB,aAAc,AACd,sBAAuB,AACnB,8BAA+B,AACnC,4BAA8B,CAC/B,AACD,4BACE,YAAa,AACb,kBAAoB,AACpB,iBAAkB,AAClB,aAAe,CAChB,AACD,kCACE,yBAA0B,AAC1B,UAAY,CACb,AACD,+BACE,mBAAoB,AACpB,eAAiB,CAClB,AACD,wCACM,gBAAkB,AACpB,mBAAoB,AACpB,aAAe,CAClB,AACD,GACE,eAAiB,CAClB",file:"Appointment.vue",sourcesContent:["\n.appointment {\n  font-size: 0.4rem;\n}\n.appointment .mint-cell-value {\n  -ms-flex: 4;\n      flex: 4;\n}\n.appointment .mint-popup {\n  width: 65%;\n}\n.appointment .footer{\n    right: 0;\n    bottom: 0;\n    left: 0;\n    position: fixed;\n    z-index: 1;\n    width: 100%;\n    background-color: #fff;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  border-top: 1px solid #d06091;\n}\n.appointment .footer .price {\n  height: 1rem;\n  margin-left: 0.5rem;\n  line-height: 1rem;\n  color: #ff8f0b;\n}\n.appointment .footer .mint-button {\n  background-color: #d06091;\n  color: #fff;\n}\n.appointment .mint-actionsheet {\n  max-height: 11.5rem;\n  overflow: scroll;\n}\n.appointment .mint-actionsheet-listitem{\n      font-size: 0.5rem;\n    line-height: 1.2rem;\n    height: 1.2rem;\n}\nli {\n  list-style: none;\n}\n/*w_popup*/\n\n"],sourceRoot:"webpack://"}])},185:function(t,e,a){var i=a(151);"string"==typeof i&&(i=[[t.id,i,""]]);a(2)(i,{});i.locals&&(t.exports=i.locals)},229:function(t,e,a){var i,n;a(185),i=a(49);var s=a(278);n=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(n=i=i.default),"function"==typeof n&&(n=n.options),n.render=s.render,n.staticRenderFns=s.staticRenderFns,t.exports=i},278:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return e("div",{staticClass:"appointment"},[e("mt-header",[e("a",{on:{click:t.goBack},slot:"left"},[e("mt-button",{attrs:{icon:"back"}},["预约确认"])])])," ",e("div",{staticClass:"appointmentBody"},[e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[t._m(0)," ",e("div",{staticClass:"w_cell_value"},[e("span",[t._s(t.beCaredDetail.name)])])])])," ",e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[t._m(1)," ",e("div",{staticClass:"w_cell_value"},[e("span",[t._s(t.glodalVal.jrOrJx)])])])])," ",e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[t._m(2)," ",e("div",{staticClass:"w_cell_value"},[e("span",[t._s(t.glodalVal.companyType)])])])])," ","计日类"==t.glodalVal.jrOrJx?e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[t._m(3)," ",e("div",{staticClass:"w_cell_value"},[e("span",{on:{click:function(e){t.timeShow=!0}}},[t._s(t.time)])])])]):e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["服务时间"])])," ",e("div",{staticClass:"w_cell_value",staticStyle:{"flex-wrap":"wrap"}},[e("ul",{staticStyle:{width:"100%","margin-left":"2%","margin-bottom":"0.1rem"}},[t._l(t.JXtime,function(a){return e("li",[t._s(a),e("span",{staticStyle:{"margin-left":"0.2rem","font-size":"0.5rem",color:"#d06091"},on:{click:function(e){t.deleteOneJxTime(a)}}},["-"])])})])," ",e("span",{on:{click:function(e){t.timeShow=!0}}},[t._s(t.time)])])])])," "," ","ys"==t.type?e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[t._m(4)," ",e("div",{staticClass:"w_cell_value"},[e("span",{on:{click:t.storeChange}},[t._s(t.store)])])])]):t._e()," ","计项类"==t.glodalVal.jrOrJx?e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[t._m(5)," ",e("div",{staticClass:"w_cell_value"},[e("span",[t._s(t.duration)])])])]):t._e()," ","ys"==t.type||1==t.glodalVal.home?e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[t._m(6)," ",e("div",{staticClass:"w_cell_value"},[e("span",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"w_core",attrs:{type:"text",placeholder:"填写家庭地址"},domProps:{value:t._s(t.address)},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])])])]):e("div",[e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["服务地址"])])," ",e("div",{staticClass:"w_cell_value"},[e("span",{on:{click:function(e){t.hospitalShow=!0}}},[t._s(t.hospital)])])])])," ",e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"})])," ",e("div",{staticClass:"w_cell_value"},[e("span",{on:{click:t.departmentsChange}},[t._s(t.departments)])," ",e("span",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.region,expression:"region"}],staticClass:"w_core",attrs:{type:"text",placeholder:"填写病区床号"},domProps:{value:t._s(t.region)},on:{input:function(e){e.target.composing||(t.region=e.target.value)}}})])])])])])," "," ",t._m(7)," ",e("a",{staticClass:"w_cell"},[e("div",{staticClass:"w_cell_wraper"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"w_field_core",attrs:{placeholder:"",rows:"5"},domProps:{value:t._s(t.remark)},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])])," ",e("mt-actionsheet",{directives:[{name:"model",rawName:"v-model",value:t.timeShow,expression:"timeShow"}],attrs:{actions:t.oneMonthDayActions,"cancel-text":""},domProps:{value:t.timeShow},on:{input:function(e){t.timeShow=e}}})," ",e("mt-actionsheet",{directives:[{name:"model",rawName:"v-model",value:t.dayTimeShow,expression:"dayTimeShow"}],attrs:{actions:t.onDayTimeActions,"cancel-text":""},domProps:{value:t.dayTimeShow},on:{input:function(e){t.dayTimeShow=e}}})," ",e("mt-actionsheet",{directives:[{name:"model",rawName:"v-model",value:t.durationDayShow,expression:"durationDayShow"}],attrs:{actions:t.ondurationDayActions,"cancel-text":""},domProps:{value:t.durationDayShow},on:{input:function(e){t.durationDayShow=e}}})," ",e("mt-actionsheet",{directives:[{name:"model",rawName:"v-model",value:t.hospitalShow,expression:"hospitalShow"}],attrs:{actions:t.hospitalActions,"cancel-text":""},domProps:{value:t.hospitalShow},on:{input:function(e){t.hospitalShow=e}}})," ",e("mt-actionsheet",{directives:[{name:"model",rawName:"v-model",value:t.departmentsShow,expression:"departmentsShow"}],attrs:{actions:t.departmentsActions,"cancel-text":""},domProps:{value:t.departmentsShow},on:{input:function(e){t.departmentsShow=e}}})," ",e("mt-actionsheet",{directives:[{name:"model",rawName:"v-model",value:t.storesShow,expression:"storesShow"}],attrs:{actions:t.storesActions,"cancel-text":""},domProps:{value:t.storesShow},on:{input:function(e){t.storesShow=e}}})])," ",e("div",{staticClass:"footer"},[e("p",{staticClass:"price"},["\n      ¥ "+t._s(t.price)+"\n    "])," ",e("mt-button",{attrs:{size:"small"},nativeOn:{click:function(e){t.handleAppoitment(e)}}},["立即预约"])])])},staticRenderFns:[function(){var t=this,e=t.$createElement;return e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["被护理人"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["服务类型"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["陪护分类"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["服务时间"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["选择门店"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["服务时长"])])},function(){var t=this,e=t.$createElement;return e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["服务地址"])])},function(){var t=this,e=t.$createElement;return e("a",{staticClass:"w_cell",staticStyle:{"min-height":"1rem"}},[e("div",{staticClass:"w_cell_wraper"},[e("div",{staticClass:"w_cell_title"},[e("span",{staticClass:"w_cell_text"},["补充说明"])])," ",e("div",{staticClass:"w_cell_value",staticStyle:{border:"none"}})])])}]}}});
//# sourceMappingURL=18.84bd6f5b0fbf9fd58e0f.js.map